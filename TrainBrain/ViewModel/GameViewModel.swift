//
//  GameViewModel.swift
//  TrainBrain
//
//  Created by JeongminKim on 2021/07/13.
//

import SwiftUI

class GameViewModel: ObservableObject {
    typealias Card = GameModel<String>.Card
    private static let level1: [String] = [
        "🍏", "🍎", "🍐", "🍊", "🍋", "🍌", "🍉", "🍇", "🍓", "🫐",
        "🍈", "🍒", "🍑", "🥭", "🍍", "🥥", "🥝", "🍅", "🍆", "🥑",
        "🥦", "🥬", "🥒", "🌶", "🫑", "🌽", "🥕", "🫒", "🧄", "🧅"
    ]
    private static let level2: [String] = [
        "🐶", "🐱", "🐭", "🐹", "🐰", "🦊", "🐻", "🐼", "🐻‍❄️", "🐨",
        "🐯", "🦁", "🐮", "🐷", "🐸", "🐵", "🐔", "🐧", "🐦", "🐤",
        "🦆", "🦅", "🦉", "🦇", "🐺", "🐗", "🐴", "🦄", "🐝", "🪱",
        "🐛", "🦋", "🐌", "🐞", "🐜", "🪰", "🪲", "🪳", "🦟", "🦗",
        "🕷", "🦂", "🐢", "🐍", "🦎", "🦖", "🦕", "🐙", "🦑", "🦐",
        "🦞", "🦀", "🐡", "🐠", "🐟", "🐬", "🐳", "🐋", "🦈", "🦭"
    ]
    private static let level3: [String] = [
        "🏳️", "🏴", "🏴‍☠️", "🏁", "🚩", "🏳️‍🌈", "🏳️‍⚧️", "🇺🇳", "🇬🇭", "🇬🇦",
        "🇬🇾", "🇬🇲", "🇬🇬", "🇬🇺", "🇬🇵", "🇬🇹", "🇬🇩", "🇬🇷", "🇬🇱", "🇬🇳",
        "🇬🇼", "🇳🇦", "🇳🇷", "🇳🇬", "🇦🇶", "🇸🇸", "🇿🇦", "🇳🇱", "🇧🇶", "🇳🇵",
        "🇳🇴", "🇳🇫", "🇳🇿", "🇳🇨", "🇳🇺", "🇳🇪", "🇳🇮", "🇹🇼", "🇰🇷", "🇩🇰",
        "🇩🇲", "🇩🇴", "🇩🇪", "🇹🇱", "🇱🇦", "🇱🇷", "🇱🇻", "🇷🇺", "🇱🇧", "🇱🇸",
        "🇷🇴", "🇱🇺", "🇷🇼", "🇱🇾", "🇷🇪", "🇱🇹", "🇱🇮", "🇲🇬", "🇲🇶", "🇲🇭",
        "🇾🇹", "🇲🇴", "🇲🇼", "🇲🇾", "🇲🇱", "🇮🇲", "🇲🇽", "🇲🇨", "🇲🇦", "🇲🇺",
        "🇲🇷", "🇲🇿", "🇲🇪", "🇲🇸", "🇲🇩", "🇲🇻", "🇲🇹", "🇲🇳", "🇺🇸", "🇻🇮",
        "🇲🇲", "🇫🇲", "🇻🇺", "🇧🇭", "🇧🇧", "🇻🇦", "🇧🇸", "🇧🇩", "🇧🇲", "🇧🇯",
        "🇻🇪", "🇻🇳", "🇧🇪", "🇧🇾", "🇧🇿", "🇧🇦", "🇧🇼", "🇧🇴", "🇧🇮", "🇧🇫",
        "🇧🇹", "🇲🇵", "🇲🇰", "🇰🇵", "🇧🇬", "🇧🇷", "🇧🇳", "🇼🇸", "🇸🇦", "🇬🇸",
        "🇸🇲", "🇸🇹", "🇧🇱", "🇵🇲", "🇪🇭", "🇸🇳", "🇷🇸", "🇸🇨", "🇱🇨", "🇻🇨",
        "🇰🇳", "🇸🇭", "🇸🇴", "🇸🇧", "🇸🇩", "🇸🇷", "🇱🇰", "🇸🇪", "🇨🇭", "🇪🇸",
        "🇸🇰", "🇸🇮", "🇸🇾", "🇸🇱", "🇸🇽", "🇸🇬", "🇦🇪", "🇦🇼", "🇦🇲", "🇦🇷",
        "🇦🇸", "🇮🇸", "🇭🇹", "🇮🇪", "🇦🇿", "🇦🇫", "🇦🇩", "🇦🇱", "🇩🇿", "🇦🇴",
        "🇦🇬", "🇦🇮", "🇪🇷", "🇸🇿", "🇪🇪", "🇪🇨", "🇪🇹", "🇸🇻", "🇬🇧", "🏴󠁧󠁢󠁥󠁮󠁧󠁿",
        "🏴󠁧󠁢󠁳󠁣󠁴󠁿", "🏴󠁧󠁢󠁷󠁬󠁳󠁿", "🇻🇬", "🇾🇪", "🇴🇲", "🇦🇺", "🇦🇹", "🇭🇳", "🇦🇽", "🇼🇫",
        "🇯🇴", "🇺🇬", "🇺🇾", "🇺🇿", "🇺🇦", "🇪🇺", "🇮🇶", "🇮🇷", "🇮🇱", "🇪🇬",
        "🇮🇹", "🇮🇳", "🇮🇩", "🇯🇵", "🇯🇲", "🇿🇲", "🇯🇪", "🇬🇶", "🇬🇪", "🇨🇳",
        "🇨🇫", "🇩🇯", "🇬🇮", "🇿🇼", "🇮🇴", "🇹🇩", "🇨🇿", "🇨🇱", "🇮🇨", "🇨🇲",
        "🇨🇻", "🇰🇿", "🇶🇦", "🇰🇭", "🇨🇦", "🇰🇪", "🇰🇾", "🇰🇲", "🇽🇰", "🇨🇷",
        "🇨🇨", "🇨🇮", "🇨🇴", "🇨🇬", "🇨🇩", "🇨🇺", "🇰🇼", "🇨🇰", "🇨🇼", "🇭🇷",
        "🇨🇽", "🇰🇬", "🇰🇮", "🇨🇾", "🇹🇯", "🇹🇿", "🇹🇭", "🇹🇨", "🇹🇷", "🇹🇬",
        "🇹🇰", "🇹🇴", "🇹🇲", "🇹🇻", "🇹🇳", "🇹🇹", "🇵🇦", "🇵🇾", "🇵🇰", "🇵🇬",
        "🇵🇼", "🇵🇸", "🇫🇴", "🇵🇪", "🇵🇹", "🇫🇰", "🇵🇱", "🇵🇷", "🇫🇷", "🇹🇫",
        "🇬🇫", "🇵🇫", "🇫🇯", "🇫🇮", "🇵🇭", "🇵🇳", "🇭🇺", "🇭🇰"
    ]
    private static let level4: [String] = [
        "😡", "🤬", "🤯", "🥵", "🥶", "😶‍🌫️", "😱", "😨", "😰", "🤢",
        "🤮", "😈", "👿", "👹", "👺", "🤡", "💩", "👻", "💀", "☠️",
        "👽", "👾", "🤖", "🎃", "😺", "😸", "😹", "😻", "😼", "😽",
        "🙀", "😿", "😾"
    ]
    private static let level5: [String] = [
        "😀", "😃", "😄", "😁", "😆", "😅", "😂", "🤣", "🥲", "☺️",
        "😊", "😇", "🙂", "🙃", "😉", "😌", "😍", "🥰", "😘", "😗",
        "😙", "😚", "😋", "😛", "😝", "😜", "🤪", "🤨", "🧐", "🤓",
        "😎", "🥸", "🤩", "🥳", "😏", "😒", "😞", "😔", "😟", "😕",
        "🙁", "☹️", "😣", "😖", "😫", "😩", "🥺", "😢", "😭", "😤",
        "😠", "😳", "😥", "😓", "🤗", "🤔", "🤭", "🤫", "🤥", "😶",
        "😐", "😑", "😬", "🙄", "😯", "😦", "😧", "😮", "😲", "🥱",
        "😴", "🤤", "😪", "😮‍💨", "😵", "😵‍💫", "🤐", "🥴", "😷", "🤒",
        "🤧", "🤕", "🤑", "🤠"
    ]
    private static var emojis: [String] {
        switch GameManager.gameLevel {
        case 0:
            return level1
        case 1:
            return level1
        case 2:
            return level2
        case 3:
            return level3
        case 4:
            return level4
        case 5:
            return level5
        default:
            return level1
        }
    }
    
    private static func createGame() -> GameModel<String> {
        // numberOfPairsOfCards = 매칭 시킬 수 있는 카드 쌍의 개수
        return GameModel<String>(numberOfPairsOfCards: GameManager.numOfPairs) { pairIndex in
            emojis[pairIndex]
        }
    }
    
    @Published private var model: GameModel<String> = createGame()
    
    var cards: [Card] {
        return model.cards
    }
    
    // MARK: - Intent(s)
    func choose(_ card: Card) {
        model.choose(card)
    }
    
    func shuffle() {
        model.shuffle()
    }
    
    func restart() {
        model = GameViewModel.createGame()
    }
}
